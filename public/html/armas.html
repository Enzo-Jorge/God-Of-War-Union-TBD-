<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GOWU | Armas</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../css/estilo2.css">
    <link rel="icon" href="../assets/imgs/raf,360x360,075,t,fafafa_ca443f4786.jpg">
  </head>
  <body onload="validarSessao()">
    <nav class="menu-lateral">
      </div>
      <ul>
        <img src="" alt="Foto de perfil" id="pfp-side-bar">
        <span class="mensagem_ola">Olá, <span id="b_nick">usuário</span>!</span>
        <li class="item-menu">
          <a href="perfil.html">
            <span class="icon"><i class="bi bi-person-circle"></i></span>
            <span class="txt-link">Perfil</span>
          </a>
        </li>
        <li class="item-menu">
          <a href="discussões.html">
            <span class="icon"><i class="bi bi-chat-dots"></i></span>
            <span class="txt-link">Discussões</span>
          </a>
        </li>
        <li class="item-menu">
          <a href="config.html">
            <span class="icon"><i class="bi bi-gear"></i></span>
            <span class="txt-link">Configurações</span>
          </a>
        </li>
        <li class="item-menu">
          <a href="#" onclick="limparSessao()">
            <span class="icon"><i class="bi bi-box-arrow-in-left"></i></i></span>
            <span class="txt-link">Sair</span>
          </a>
        </li>
      </ul>
    </nav>
    <div class="screen">
      <div class="header">
        <div class="container">
          <h1 class="titulo">God Of War Union</h1>
          <ul class="navbar">
            <li>
              <a href="mural.html">Mural</a>
            </li>
            <li>
              |
            </li>
            <li>
              <a href="histórias.html">Histórias</a>
            </li>
            <li>
              |
            </li>
            <li>
              <a href="musicas.html">Músicas</a>
            </li>
            <li>
              |
            </li>
            <li class="agora">
              <a href="armas.html">Armas</a>
            </li>
            <li>
              |
            </li>
            <li>
              <a href="quizzes.html">Quizzes</a>
          </li>
          <li>
            |
          </li>
            <li>
              <a href="ajude.html">Ajude!!</a>
          </li>
      </ul>
</div>
</div>
<div class="content" style="background-image: url(https://i.pinimg.com/originals/78/8e/b3/788eb3fe3a2f75d898c900a425bab962.jpg); height: 100vh;">
    <button onclick="retroceder()" id="retroceder">&lt;</button>
    <button onclick="avancar()" id="avancar">&gt;</button>
    <div class="slider">
        <div class="slides">
            <div class="slide" id="idimg1">
                <img src="../assets/imgs/Blades_of_Chaos_LV5_29.webp">
            </div>
            <div class="slide">
                <img src="../assets/imgs/Blades_of_Chaos_LV5_29.webp" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="../assets/imgs/maxresdefault.jpg" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="../assets/imgs/Blades_of_Athena_Render.webp" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="../assets/imgs/Hammer.webp" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="https://static0.gamerantimages.com/wordpress/wp-content/uploads/2020/06/Spear-of-Destiny-God-of-War.jpg" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="https://pm1.aminoapps.com/7066/12647c79097e1b3270483d462b2436d18d2622c9r1-544-544v2_00.jpg" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="https://media.sketchfab.com/models/72423bd4cccc4b728e2fd03f48bc2da3/thumbnails/938b5f740a674e4b8798bfc1a2da8218/10367e987cc84569a6df79f78d75c462.jpeg" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="../assets/imgs/Claws_of_Hades.webp" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="https://i.pinimg.com/originals/68/39/cb/6839cba9b4c307b1a06fc2945ae961f2.jpg" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="../assets/imgs/Nemesis_Whip.webp" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="https://cdn.artstation.com/p/thumbnails/001/699/654/thumb.jpg" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="../assets/imgs/Eteet_2.webp" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="https://dotesports.com/wp-content/uploads/2024/03/leviathan-axe-fortnite-how-to-get.jpeg" style="height: 400px; width: 400px;">
            </div>
            <div class="slide">
                <img src="https://i.etsystatic.com/27017696/r/il/2b6787/4494482960/il_fullxfull.4494482960_139k.jpg" style="height: 400px; width: 400px;">
            </div>
        </div>
      </div>
      <div class="historia">
        <h1 id="arma_jogo" class="jogo-text">Lâminas do Caos <a onclick="estrela1()" class="estrela" id="estrela_fav1">☆</a></h1>
        <h3 id="descricao_jogo" class="jogo-text">As lâminas do Caos são as armas perfeitas para o guerreiro perfeito. Forjadas nas profundezas do Tártaro pelo deus Hefesto sob o comando de Ares, as armas foram entregues a Kratos após sua jura de sangue com Ares na beira de sua morte.</h3>
      </div>
    </div>
  </div>
</body>
</html>
<script src="../js/sidebar.js"></script>
<script src="../js/sessao.js"></script>
<script src="../js/armas.js"></script>
<script>

// Adicionado em 28/07/2024

    var weapon_name = '#';
    var weapon_id = '#';

    document.getElementById('pfp-side-bar').src = sessionStorage.IMGURL_USUARIO;

    function weaponPull() {

var idVar = Number(sessionStorage.ID_USUARIO);

fetch(`/favs/pullWeapon/${sessionStorage.ID_USUARIO}`, {
  method: "GET",
}).then(function (resposta) {
  console.log("ESTOU NO THEN DO weaponPull()!")

  if (resposta.ok) {
    console.log(resposta);
    resposta.json().then(function (resposta) {
      console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
      resposta.reverse();

      estrela_dourada(resposta, sessionStorage.ID_USUARIO);

    })

  } else {
    console.error('Nenhum dado encontrado na API');
  }

}).catch(function (error) {
  console.error(`Erro na obtenção de dados p/ puxar: ${error.message}`);
});
}

function estrela_dourada(resposta, id) {
console.log('Iniciando o pull dos dados...');
console.log('----------------------------------------------')
console.log('Estes dados foram recebidos pela função "weaponPull()" e passados para "estrela_dourada()":')
console.log(resposta)

var registro = resposta[0];

var weapon_name = registro.arma;
var weapon_id = registro.idArma;


if(arma_jogo.innerHTML == `${weapon_name} <a onclick="estrela${weapon_id}()" class="estrela" id="estrela_fav${weapon_id}">☆</a>`) {
  arma_jogo.innerHTML = `${weapon_name} <a onclick="estrela${weapon_id}()" class="estrela" id="estrela_fav${weapon_id}">★</a>`
}

}

    function estrela1() {

      if(estrela_fav1.innerHTML == '☆') {
        estrela_fav1.innerHTML = '★';
        favoritoVar = 1;
      } else {
        estrela_fav1.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela2() {
      
      if(estrela_fav2.innerHTML == '☆') {
        estrela_fav2.innerHTML = '★';
        favoritoVar = 2;
      } else {
        estrela_fav2.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela3() {
      
      if(estrela_fav3.innerHTML == '☆') {
        estrela_fav3.innerHTML = '★';
        favoritoVar = 3;
      } else {
        estrela_fav3.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela4() {
      
      if(estrela_fav4.innerHTML == '☆') {
        estrela_fav4.innerHTML = '★';
        favoritoVar = 4;
      } else {
        estrela_fav4.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela5() {
      
      if(estrela_fav5.innerHTML == '☆') {
        estrela_fav5.innerHTML = '★';
        favoritoVar = 5;
      } else {
        estrela_fav5.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela6() {
      
      if(estrela_fav6.innerHTML == '☆') {
        estrela_fav6.innerHTML = '★';
        favoritoVar = 6;
      } else {
        estrela_fav6.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela7() {
      
      if(estrela_fav7.innerHTML == '☆') {
        estrela_fav7.innerHTML = '★';
        favoritoVar = 7;
      } else {
        estrela_fav7.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela8() {
      
      if(estrela_fav8.innerHTML == '☆') {
        estrela_fav8.innerHTML = '★';
        favoritoVar = 8;
      } else {
        estrela_fav8.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela9() {
      
      if(estrela_fav9.innerHTML == '☆') {
        estrela_fav9.innerHTML = '★';
        favoritoVar = 9;
      } else {
        estrela_fav9.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela10() {
      
      if(estrela_fav10.innerHTML == '☆') {
        estrela_fav10.innerHTML = '★';
        favoritoVar = 10;
      } else {
        estrela_fav10.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela11() {
      
      if(estrela_fav11.innerHTML == '☆') {
        estrela_fav11.innerHTML = '★';
        favoritoVar = 11;
      } else {
        estrela_fav11.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela12() {
      
      if(estrela_fav12.innerHTML == '☆') {
        estrela_fav12.innerHTML = '★';
        favoritoVar = 12;
      } else {
        estrela_fav12.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela13() {
      
      if(estrela_fav13.innerHTML == '☆') {
        estrela_fav13.innerHTML = '★';
        favoritoVar = 13;
      } else {
        estrela_fav13.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function estrela14() {
      
      if(estrela_fav14.innerHTML == '☆') {
        estrela_fav14.innerHTML = '★';
        favoritoVar = 14;
      } else {
        estrela_fav14.innerHTML = '☆';
        favoritoVar = null;
      }
      
      favoritarArma();
      
    }
    
    function favoritarArma() {
      
      var idVar = Number(sessionStorage.ID_USUARIO);
      
      if(
        idVar == ''
      ) {
        console.log('O id não pode estar indefinido.')
      } else {
        fetch("../favs/favoritarArma", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            idServer: idVar,
            ArmaFavServer: favoritoVar,
          }),
        })
        .then(function (resposta) {
          console.log("resposta: ", resposta);
          
          if (resposta.ok) {
            console.log('dados inseridos no banco com sucesso!');
          } else {
            throw "Houve um erro no fetch ao tentar realizar a inserção no banco!"
          }
        })
        .catch(function (resposta) {
          console.log(`#ERRO ${resposta}`);
        });
        
        return false;
        }
        
      }

</script>